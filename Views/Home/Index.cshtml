@{
    ViewData["Title"] = "Home Page";

}

<div @* style="background-color:#155f82;height:80vh" *@>
    <div>
        <h2 style="text-align:center;padding-top:10px;">Swiss System</h2>
    </div>
    <div style="margin-left:10px;">
        <div>
            <a class="btn btn-info" id="pryear"></a>
            <a class="btn  btn-info" id="curryear"></a>
            <a class="btn  btn-info" id="nexyear"></a>
        </div>
        <div>
            <a class="btn btn-outline-success" style="margin:10px 0 10px 0;" asp-controller="Home" asp-action="AddEvent">Add Event </a>

        </div>
        <table id="tb_event" class="table table-bordered" style=" border-color:#df7132">     
        
        </table>
    </div>
</div>

@section Scripts {
    <script>
        $(document).ready(function () {
            GetEvent();

            var d = new Date(); // year -1
            var curryear = d.getFullYear();
            $('#curryear').text(curryear);

            var pryear = curryear - 1;
            $('#pryear').text(pryear);

            var nexyear = curryear + 1;
            $('#nexyear').text(nexyear);
            GetEvent(curryear);

            $('#pryear').click(function () {
                alert('pryear');
            });
            $('#curryear').click(function () {
                alert('curryear');
            });
            $('#nexyear').click(function () {
                alert('nexyear');
            });
        });



        function GetEvent(years) {
            $.ajax({
                url: '/Home/GetEvent',
                type: 'GET',
                data: { year: years },
                success: function (data) {
                    var html = '';
                    for (var i = 0; i < data.length; i++) {
                        html += '<tr>';
                        html += '<td style="width:60%">' + data[i].event_name + '<br>' + data[i].event_date + '  ' + data[i].event_location + '</td>';
                        html += '<td style="width:15%">' + data[i].event_type + '<br>' + ' </td>';
                        html += '<td style="width:15%">' + data[i].event_round + '<br>' + '</td>';
                        html += '<td><a href="/Home/EditEvent/' + data[i].event_id + '">Edit</a> | <a href="javascript:void(0)" onclick="DeleteEvent(' + data[i].event_id + ')">Delete</a></td>';
                        html += '</tr>';
                    }
                    $('#tb_event').html(html);




                    console.log(data);
                },
                error: function (data) {
                    console.log(data);
                }
            });
        }
    </script>
}